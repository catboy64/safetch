

fn output_to_string(output: std::process::Output) -> String {
    if output.status.success() {
        let username = String::from_utf8_lossy(&output.stdout);
        username.to_string()
    }
    else {
        let stderr = String::from_utf8_lossy(&output.stderr);
        stderr.to_string()
    }
}

fn get_user() -> String{
    use std::process::Command;

    let output = Command::new("sh")
        .args(["-c","whoami"])
        .output()
        .expect("failed to execute whoami");

    output_to_string(output)
}

fn main() {
    let username = String::from(get_user());
    println!("username: {username}");
}
